<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.trip97.modules.user.model.mapper.UserMapper">

    <resultMap id="user" type="user">
        <result column="profile_image" property="profileImage" />
        <result column="oauth_provider" property="oAuthProvider" />
    </resultMap>

    <insert id="save" parameterType="user">
        insert into users (email, nickname, oauth_provider)
        values (#{email}, #{nickname}, #{oAuthProvider})
        <selectKey resultType="int" keyProperty="id" order="AFTER">
            select last_insert_id()
        </selectKey>
    </insert>

    <select id="findByEmail" parameterType="string" resultMap="user">
        select id, email, nickname, profile_image, introduction, oauth_provider
        from users
        where email = #{email}
    </select>

    <select id="findAll" resultMap="user">
        select id, email, nickname, profile_image, introduction, oauth_provider
        from users
    </select>

</mapper>