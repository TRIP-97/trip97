<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.trip97.modules.member.model.mapper.MemberMapper">

    <resultMap id="member" type="member">
        <result column="profile_image" property="profileImage" />
        <result column="oauth_provider" property="oAuthProvider" />
        <result column="friend_code" property="friendCode" />
    </resultMap>

    <insert id="save" parameterType="member">
        insert into members (email, nickname, oauth_provider, friend_code)
        values (#{email}, #{nickname}, #{oAuthProvider}, #{friendCode})
        <selectKey resultType="int" keyProperty="id" order="AFTER">
            select last_insert_id()
        </selectKey>
    </insert>

    <select id="findByEmail" parameterType="string" resultMap="member">
        select id, email, nickname, profile_image, introduction, oauth_provider, friend_code
        from members
        where id = #{id}
    </select>
    
    <select id="findById" parameterType="int" resultMap="member">
        select id, email, nickname, profile_image, introduction, oauth_provider, friend_code
        from members
        where id = #{id}
    </select>
    

    <select id="findAll" resultMap="member">
        select id, email, nickname, profile_image, introduction, oauth_provider, friend_code
        from members
    </select>

</mapper>